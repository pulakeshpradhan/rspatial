
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      
        <link rel="prev" href="../Open_Meteo_WEB_API/">
      
      
        <link rel="next" href="../Prediction/">
      
      
        
      
      
      <link rel="icon" href="../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.7.1">
    
    
      
        <title>NWA Cloud based Geospatial data processing - GeoPython Tutorial</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.484c7ddc.min.css">
      
        
        <link rel="stylesheet" href="../assets/stylesheets/palette.ab4e12ef.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
    <script>__md_scope=new URL("..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="teal" data-md-color-accent="purple">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#cloud-based-geospatial-data-processing" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href=".." title="GeoPython Tutorial" class="md-header__button md-logo" aria-label="GeoPython Tutorial" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            GeoPython Tutorial
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              NWA Cloud based Geospatial data processing
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="default" data-md-color-primary="teal" data-md-color-accent="purple"  aria-hidden="true"  type="radio" name="__palette" id="__palette_0">
    
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="slate" data-md-color-primary="teal" data-md-color-accent="lime"  aria-hidden="true"  type="radio" name="__palette" id="__palette_1">
    
  
</form>
      
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
            
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href=".." class="md-tabs__link">
        
  
  
    
  
  Home

      </a>
    </li>
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../01_Basic_Data_types/" class="md-tabs__link">
          
  
  
  Python Fundamentals

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../09_Working_with_Numpy/" class="md-tabs__link">
          
  
  
  Data Science Core

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../10_Time_Series_Analysis_Part_I/" class="md-tabs__link">
          
  
  
  Time Series Analysis

        </a>
      </li>
    
  

      
        
  
  
  
    
  
  
    
    
      <li class="md-tabs__item md-tabs__item--active">
        <a href="../07_Geospatial_Analysis_Vector_Data/" class="md-tabs__link">
          
  
  
  Geospatial Analysis & Cloud

        </a>
      </li>
    
  

      
    </ul>
  </div>
</nav>
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


  


  

<nav class="md-nav md-nav--primary md-nav--lifted md-nav--integrated" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href=".." title="GeoPython Tutorial" class="md-nav__button md-logo" aria-label="GeoPython Tutorial" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    GeoPython Tutorial
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href=".." class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Home
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2" >
        
          
          <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Python Fundamentals
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            
  
    Python Fundamentals
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../01_Basic_Data_types/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    01 Basic Data types
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../02_Data_Structures_in_Python/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    02 Data Structures in Python
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../03_Functions_Loops_Controlflow/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    03 Functions Loops Controlflow
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../04_OOP_Error_and_File_handling/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    04 OOP Error and File handling
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" >
        
          
          <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Data Science Core
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            
  
    Data Science Core
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../09_Working_with_Numpy/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    09 Working with Numpy
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../05_Working_with_Pandas_Part_I/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    05 Working with Pandas Part I
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../06_Working_with_Pandas_Part_II/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    06 Working with Pandas Part II
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Data_Visualization_using_Python/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Data Visualization using Python
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Web_Scraping_web_Table/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Web Scraping web Table
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4" >
        
          
          <label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Time Series Analysis
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            
  
    Time Series Analysis
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../10_Time_Series_Analysis_Part_I/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    10 Time Series Analysis Part I
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../11_Time_Series_Analysis_Part_II/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    11 Time Series Analysis Part II
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
    
    
      
        
        
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5" checked>
        
          
          <label class="md-nav__link" for="__nav_5" id="__nav_5_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    
  
    Geospatial Analysis & Cloud
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_5_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_5">
            <span class="md-nav__icon md-icon"></span>
            
  
    Geospatial Analysis & Cloud
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../07_Geospatial_Analysis_Vector_Data/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    07 Geospatial Analysis Vector Data
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Geospatial_Analysis_Working_with_Raster_Data/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Geospatial Analysis Working with Raster Data
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../OpenWeatherMapAPI/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    OpenWeatherMapAPI
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Open_Meteo_WEB_API/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Open Meteo WEB API
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  
  <span class="md-ellipsis">
    
  
    NWA Cloud based Geospatial data processing
  

    
  </span>
  
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  
  <span class="md-ellipsis">
    
  
    NWA Cloud based Geospatial data processing
  

    
  </span>
  
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#downloading-cog-data-from-aws-open-data-catalog" class="md-nav__link">
    <span class="md-ellipsis">
      
        Downloading COG data from AWS open data catalog
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#visualize-raster-data-and-metadata" class="md-nav__link">
    <span class="md-ellipsis">
      
        Visualize raster data and metadata
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#processing-2-time-period-data-and-doing-change-detection" class="md-nav__link">
    <span class="md-ellipsis">
      
        Processing 2 time period data and doing change detection
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#lecture-visualization" class="md-nav__link">
    <span class="md-ellipsis">
      
        Lecture Visualization
      
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Prediction/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Prediction
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
          
          
            <div class="md-content" data-md-component="content">
              
              <article class="md-content__inner md-typeset">
                
                  



<h1 id="cloud-based-geospatial-data-processing">Cloud based Geospatial Data Processing</h1>
<p>Prasun Kumar Gupta (IIRS/ISRO)</p>
<p><code>prasun@iirs.gov.in</code></p>
<p>This notebook as the following sections:
* Introduction to Cloud Native Geospatial Data Processsing using STAC, COG and Xarray
* Downloading COG data from AWS open data catalog
* Visualize raster data and metadata
* Processing 2 time period data and doing change detection</p>
<h2 id="downloading-cog-data-from-aws-open-data-catalog">Downloading COG data from AWS open data catalog</h2>
<p>In this section we will see how to explore the Amazon Web Services (AWS) open data catalog, and download the Cloud Optimized GeoTIFFs (COG).</p>
<p>First step is to install the required packages.</p>
<div class="highlight"><pre><span></span><code><span class="err">!</span><span class="n">pip</span> <span class="n">install</span> <span class="n">pystac_client</span>
</code></pre></div>
<pre><code>Collecting pystac_client
  Downloading pystac_client-0.9.0-py3-none-any.whl.metadata (3.1 kB)
Requirement already satisfied: requests&gt;=2.28.2 in /usr/local/lib/python3.12/dist-packages (from pystac_client) (2.32.4)
Collecting pystac&gt;=1.10.0 (from pystac[validation]&gt;=1.10.0-&gt;pystac_client)
  Downloading pystac-1.14.1-py3-none-any.whl.metadata (4.7 kB)
Requirement already satisfied: python-dateutil&gt;=2.8.2 in /usr/local/lib/python3.12/dist-packages (from pystac_client) (2.9.0.post0)
Requirement already satisfied: jsonschema~=4.18 in /usr/local/lib/python3.12/dist-packages (from pystac[validation]&gt;=1.10.0-&gt;pystac_client) (4.25.1)
Requirement already satisfied: six&gt;=1.5 in /usr/local/lib/python3.12/dist-packages (from python-dateutil&gt;=2.8.2-&gt;pystac_client) (1.17.0)
Requirement already satisfied: charset_normalizer&lt;4,&gt;=2 in /usr/local/lib/python3.12/dist-packages (from requests&gt;=2.28.2-&gt;pystac_client) (3.4.3)
Requirement already satisfied: idna&lt;4,&gt;=2.5 in /usr/local/lib/python3.12/dist-packages (from requests&gt;=2.28.2-&gt;pystac_client) (3.10)
Requirement already satisfied: urllib3&lt;3,&gt;=1.21.1 in /usr/local/lib/python3.12/dist-packages (from requests&gt;=2.28.2-&gt;pystac_client) (2.5.0)
Requirement already satisfied: certifi&gt;=2017.4.17 in /usr/local/lib/python3.12/dist-packages (from requests&gt;=2.28.2-&gt;pystac_client) (2025.10.5)
Requirement already satisfied: attrs&gt;=22.2.0 in /usr/local/lib/python3.12/dist-packages (from jsonschema~=4.18-&gt;pystac[validation]&gt;=1.10.0-&gt;pystac_client) (25.4.0)
Requirement already satisfied: jsonschema-specifications&gt;=2023.03.6 in /usr/local/lib/python3.12/dist-packages (from jsonschema~=4.18-&gt;pystac[validation]&gt;=1.10.0-&gt;pystac_client) (2025.9.1)
Requirement already satisfied: referencing&gt;=0.28.4 in /usr/local/lib/python3.12/dist-packages (from jsonschema~=4.18-&gt;pystac[validation]&gt;=1.10.0-&gt;pystac_client) (0.36.2)
Requirement already satisfied: rpds-py&gt;=0.7.1 in /usr/local/lib/python3.12/dist-packages (from jsonschema~=4.18-&gt;pystac[validation]&gt;=1.10.0-&gt;pystac_client) (0.27.1)
Requirement already satisfied: typing-extensions&gt;=4.4.0 in /usr/local/lib/python3.12/dist-packages (from referencing&gt;=0.28.4-&gt;jsonschema~=4.18-&gt;pystac[validation]&gt;=1.10.0-&gt;pystac_client) (4.15.0)
Downloading pystac_client-0.9.0-py3-none-any.whl (41 kB)
[?25l   [90m‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ[0m [32m0.0/41.8 kB[0m [31m?[0m eta [36m-:--:--[0m
</code></pre>
<p>[2K   [90m‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ[0m [32m41.8/41.8 kB[0m [31m2.4 MB/s[0m eta [36m0:00:00[0m
    [?25hDownloading pystac-1.14.1-py3-none-any.whl (207 kB)
    [2K   [90m‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ[0m [32m207.7/207.7 kB[0m [31m12.1 MB/s[0m eta [36m0:00:00[0m
    [?25hInstalling collected packages: pystac, pystac_client
    Successfully installed pystac-1.14.1 pystac_client-0.9.0</p>
<div class="highlight"><pre><span></span><code><span class="c1"># We will now try to make a connection with the AWS client API</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">pystac_client</span><span class="w"> </span><span class="kn">import</span> <span class="n">Client</span>

<span class="n">api_url</span> <span class="o">=</span> <span class="s2">&quot;https://earth-search.aws.element84.com/v1&quot;</span>
<span class="n">client</span> <span class="o">=</span> <span class="n">Client</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="n">api_url</span><span class="p">)</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code><span class="nb">print</span><span class="p">(</span><span class="s2">&quot;***Printing the names of image collections in the AWS open data API***&quot;</span><span class="p">)</span>
<span class="n">collections</span> <span class="o">=</span> <span class="n">client</span><span class="o">.</span><span class="n">get_all_collections</span><span class="p">()</span>
<span class="k">for</span> <span class="n">each_collection</span> <span class="ow">in</span> <span class="n">collections</span><span class="p">:</span>
  <span class="nb">print</span><span class="p">(</span><span class="n">each_collection</span><span class="o">.</span><span class="n">id</span><span class="p">)</span>
</code></pre></div>
<pre><code>***Printing the names of image collections in the AWS open data API***
sentinel-2-pre-c1-l2a
cop-dem-glo-30
naip
cop-dem-glo-90
landsat-c2-l2
sentinel-2-l2a
sentinel-2-l1c
sentinel-2-c1-l2a
sentinel-1-grd
</code></pre>
<div class="highlight"><pre><span></span><code><span class="c1"># Setting a vairable collection to the S2 collection name</span>
<span class="n">collection</span> <span class="o">=</span> <span class="s2">&quot;sentinel-2-l2a&quot;</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code><span class="kn">from</span><span class="w"> </span><span class="nn">shapely.geometry</span><span class="w"> </span><span class="kn">import</span> <span class="n">Point</span>
<span class="n">point</span> <span class="o">=</span> <span class="n">Point</span><span class="p">(</span><span class="mf">73.544005</span><span class="p">,</span> <span class="mf">18.366689</span><span class="p">)</span>  <span class="c1"># Panshet coordinates</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code><span class="kn">import</span><span class="w"> </span><span class="nn">folium</span>

<span class="c1"># Create a map centered around the point</span>
<span class="n">m</span> <span class="o">=</span> <span class="n">folium</span><span class="o">.</span><span class="n">Map</span><span class="p">(</span><span class="n">location</span><span class="o">=</span><span class="p">[</span><span class="n">point</span><span class="o">.</span><span class="n">y</span><span class="p">,</span> <span class="n">point</span><span class="o">.</span><span class="n">x</span><span class="p">],</span> <span class="n">zoom_start</span><span class="o">=</span><span class="mi">11</span><span class="p">,</span> <span class="n">width</span><span class="o">=</span><span class="mi">400</span><span class="p">,</span> <span class="n">height</span><span class="o">=</span><span class="mi">300</span><span class="p">)</span>

<span class="c1"># Add a marker for the point</span>
<span class="n">folium</span><span class="o">.</span><span class="n">Marker</span><span class="p">([</span><span class="n">point</span><span class="o">.</span><span class="n">y</span><span class="p">,</span> <span class="n">point</span><span class="o">.</span><span class="n">x</span><span class="p">],</span> <span class="n">popup</span><span class="o">=</span><span class="s2">&quot;Panshet&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">add_to</span><span class="p">(</span><span class="n">m</span><span class="p">)</span>

<span class="c1"># Display the map</span>
<span class="n">display</span><span class="p">(</span><span class="n">m</span><span class="p">)</span>
</code></pre></div>
<div style="width:100%;"><div style="position:relative;width:100%;height:0;padding-bottom:60%;"><span style="color:#565656">Make this Notebook Trusted to load map: File -> Trust Notebook</span><iframe srcdoc="&lt;!DOCTYPE html&gt;
&lt;html&gt;
&lt;head&gt;

    &lt;meta http-equiv=&quot;content-type&quot; content=&quot;text/html; charset=UTF-8&quot; /&gt;
    &lt;script src=&quot;https://cdn.jsdelivr.net/npm/leaflet@1.9.3/dist/leaflet.js&quot;&gt;&lt;/script&gt;
    &lt;script src=&quot;https://code.jquery.com/jquery-3.7.1.min.js&quot;&gt;&lt;/script&gt;
    &lt;script src=&quot;https://cdn.jsdelivr.net/npm/bootstrap@5.2.2/dist/js/bootstrap.bundle.min.js&quot;&gt;&lt;/script&gt;
    &lt;script src=&quot;https://cdnjs.cloudflare.com/ajax/libs/Leaflet.awesome-markers/2.0.2/leaflet.awesome-markers.js&quot;&gt;&lt;/script&gt;
    &lt;link rel=&quot;stylesheet&quot; href=&quot;https://cdn.jsdelivr.net/npm/leaflet@1.9.3/dist/leaflet.css&quot;/&gt;
    &lt;link rel=&quot;stylesheet&quot; href=&quot;https://cdn.jsdelivr.net/npm/bootstrap@5.2.2/dist/css/bootstrap.min.css&quot;/&gt;
    &lt;link rel=&quot;stylesheet&quot; href=&quot;https://netdna.bootstrapcdn.com/bootstrap/3.0.0/css/bootstrap-glyphicons.css&quot;/&gt;
    &lt;link rel=&quot;stylesheet&quot; href=&quot;https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.2.0/css/all.min.css&quot;/&gt;
    &lt;link rel=&quot;stylesheet&quot; href=&quot;https://cdnjs.cloudflare.com/ajax/libs/Leaflet.awesome-markers/2.0.2/leaflet.awesome-markers.css&quot;/&gt;
    &lt;link rel=&quot;stylesheet&quot; href=&quot;https://cdn.jsdelivr.net/gh/python-visualization/folium/folium/templates/leaflet.awesome.rotate.min.css&quot;/&gt;

            &lt;meta name=&quot;viewport&quot; content=&quot;width=device-width,
                initial-scale=1.0, maximum-scale=1.0, user-scalable=no&quot; /&gt;
            &lt;style&gt;
                #map_8f133081a4b2d958309be9111da4344c {
                    position: relative;
                    width: 400.0px;
                    height: 300.0px;
                    left: 0.0%;
                    top: 0.0%;
                }
                .leaflet-container { font-size: 1rem; }
            &lt;/style&gt;

            &lt;style&gt;html, body {
                width: 100%;
                height: 100%;
                margin: 0;
                padding: 0;
            }
            &lt;/style&gt;

            &lt;style&gt;#map {
                position:absolute;
                top:0;
                bottom:0;
                right:0;
                left:0;
                }
            &lt;/style&gt;

            &lt;script&gt;
                L_NO_TOUCH = false;
                L_DISABLE_3D = false;
            &lt;/script&gt;


&lt;/head&gt;
&lt;body&gt;


            &lt;div class=&quot;folium-map&quot; id=&quot;map_8f133081a4b2d958309be9111da4344c&quot; &gt;&lt;/div&gt;

&lt;/body&gt;
&lt;script&gt;


            var map_8f133081a4b2d958309be9111da4344c = L.map(
                &quot;map_8f133081a4b2d958309be9111da4344c&quot;,
                {
                    center: [18.366689, 73.544005],
                    crs: L.CRS.EPSG3857,
                    ...{
  &quot;zoom&quot;: 11,
  &quot;zoomControl&quot;: true,
  &quot;preferCanvas&quot;: false,
}

                }
            );





            var tile_layer_7df3d303d700554ce9fb432cf1691a09 = L.tileLayer(
                &quot;https://tile.openstreetmap.org/{z}/{x}/{y}.png&quot;,
                {
  &quot;minZoom&quot;: 0,
  &quot;maxZoom&quot;: 19,
  &quot;maxNativeZoom&quot;: 19,
  &quot;noWrap&quot;: false,
  &quot;attribution&quot;: &quot;\u0026copy; \u003ca href=\&quot;https://www.openstreetmap.org/copyright\&quot;\u003eOpenStreetMap\u003c/a\u003e contributors&quot;,
  &quot;subdomains&quot;: &quot;abc&quot;,
  &quot;detectRetina&quot;: false,
  &quot;tms&quot;: false,
  &quot;opacity&quot;: 1,
}

            );


            tile_layer_7df3d303d700554ce9fb432cf1691a09.addTo(map_8f133081a4b2d958309be9111da4344c);


            var marker_d021fba27bbbb27c5627c6285a274b29 = L.marker(
                [18.366689, 73.544005],
                {
}
            ).addTo(map_8f133081a4b2d958309be9111da4344c);


        var popup_3687ce04a7d4451acf555af18dfe26bd = L.popup({
  &quot;maxWidth&quot;: &quot;100%&quot;,
});



                var html_59f31645acb71342c4f5e364dc9a88e3 = $(`&lt;div id=&quot;html_59f31645acb71342c4f5e364dc9a88e3&quot; style=&quot;width: 100.0%; height: 100.0%;&quot;&gt;Panshet&lt;/div&gt;`)[0];
                popup_3687ce04a7d4451acf555af18dfe26bd.setContent(html_59f31645acb71342c4f5e364dc9a88e3);



        marker_d021fba27bbbb27c5627c6285a274b29.bindPopup(popup_3687ce04a7d4451acf555af18dfe26bd)
        ;



&lt;/script&gt;
&lt;/html&gt;" style="position:absolute;width:100%;height:100%;left:0;top:0;border:none !important;" allowfullscreen webkitallowfullscreen mozallowfullscreen></iframe></div></div>

<div class="highlight"><pre><span></span><code><span class="c1"># An example of a simple catalog search using collection name and point of the location of interest.</span>
<span class="n">search</span> <span class="o">=</span> <span class="n">client</span><span class="o">.</span><span class="n">search</span><span class="p">(</span>
    <span class="n">collections</span><span class="o">=</span><span class="p">[</span><span class="n">collection</span><span class="p">],</span>
    <span class="n">intersects</span><span class="o">=</span><span class="n">point</span><span class="p">,</span>
    <span class="n">max_items</span><span class="o">=</span><span class="mi">10</span>
<span class="p">)</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code><span class="c1"># This show the number of scenes that matched our search criteria with the parameters assigned above</span>
<span class="nb">print</span><span class="p">(</span><span class="n">search</span><span class="o">.</span><span class="n">matched</span><span class="p">())</span>
</code></pre></div>
<pre><code>785
</code></pre>
<div class="highlight"><pre><span></span><code><span class="c1"># Now we retrieve the metadata of the search results by calling the method item_collection:</span>
<span class="n">items</span> <span class="o">=</span> <span class="n">search</span><span class="o">.</span><span class="n">item_collection</span><span class="p">()</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code><span class="nb">print</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">items</span><span class="p">))</span>
</code></pre></div>
<pre><code>10
</code></pre>
<div class="highlight"><pre><span></span><code><span class="c1"># We can iterate over the returned items and print these to show their IDs</span>
<span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="n">items</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">item</span><span class="p">)</span>
</code></pre></div>
<pre><code>&lt;Item id=S2B_43QCA_20251010_0_L2A&gt;
&lt;Item id=S2C_43QCA_20251005_0_L2A&gt;
&lt;Item id=S2B_43QCA_20250930_0_L2A&gt;
&lt;Item id=S2A_43QCA_20250927_0_L2A&gt;
&lt;Item id=S2C_43QCA_20250925_0_L2A&gt;
&lt;Item id=S2B_43QCA_20250920_0_L2A&gt;
&lt;Item id=S2C_43QCA_20250915_0_L2A&gt;
&lt;Item id=S2B_43QCA_20250910_0_L2A&gt;
&lt;Item id=S2A_43QCA_20250907_0_L2A&gt;
&lt;Item id=S2C_43QCA_20250905_0_L2A&gt;
</code></pre>
<div class="highlight"><pre><span></span><code><span class="sd">&#39;&#39;&#39;</span>
<span class="sd">Let us look at the metadata of first item, which contains the</span>
<span class="sd">  information about the scene geometry, its acquisition time,</span>
<span class="sd">  and other metadata that can be accessed as a dictionary</span>
<span class="sd">  from the properties attribute.</span>
<span class="sd">&#39;&#39;&#39;</span>
<span class="n">item</span> <span class="o">=</span> <span class="n">items</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
<span class="nb">print</span><span class="p">(</span><span class="n">item</span><span class="o">.</span><span class="n">datetime</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">item</span><span class="o">.</span><span class="n">geometry</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">item</span><span class="o">.</span><span class="n">properties</span><span class="p">)</span>
</code></pre></div>
<pre><code>2025-10-10 05:43:54.687000+00:00
{'type': 'Polygon', 'coordinates': [[[73.1163095879457, 18.982926901132814], [73.10102417802511, 18.913641991836123], [73.11114378622386, 17.990933946147493], [74.14797678232213, 17.998266544949992], [74.14305632414283, 18.99052878648329], [73.1163095879457, 18.982926901132814]]]}
{'created': '2025-10-10T09:14:37.443Z', 'platform': 'sentinel-2b', 'constellation': 'sentinel-2', 'instruments': ['msi'], 'eo:cloud_cover': 13.744092, 'proj:centroid': {'lat': 18.49086, 'lon': 73.62592}, 'mgrs:utm_zone': 43, 'mgrs:latitude_band': 'Q', 'mgrs:grid_square': 'CA', 'grid:code': 'MGRS-43QCA', 'view:azimuth': 104.79901935480346, 'view:incidence_angle': 6.798083675006504, 'view:sun_azimuth': 144.632526299654, 'view:sun_elevation': 59.6159004624801, 's2:tile_id': 'S2B_OPER_MSI_L2A_TL_2BPS_20251010T075840_A044890_T43QCA_N05.11', 's2:degraded_msi_data_percentage': 0.0212, 's2:nodata_pixel_percentage': 0.04778, 's2:saturated_defective_pixel_percentage': 0, 's2:cloud_shadow_percentage': 7.3e-05, 's2:vegetation_percentage': 70.214278, 's2:not_vegetated_percentage': 13.014373, 's2:water_percentage': 1.844402, 's2:unclassified_percentage': 1.058767, 's2:medium_proba_clouds_percentage': 0.428654, 's2:high_proba_clouds_percentage': 0.006765, 's2:thin_cirrus_percentage': 13.308673, 's2:snow_ice_percentage': 0, 's2:product_type': 'S2MSI2A', 's2:processing_baseline': '05.11', 's2:product_uri': 'S2B_MSIL2A_20251010T052649_N0511_R105_T43QCA_20251010T075840.SAFE', 's2:generation_time': '2025-10-10T07:58:40.000000Z', 's2:datatake_id': 'GS2B_20251010T052649_044890_N05.11', 's2:datatake_type': 'INS-NOBS', 's2:datastrip_id': 'S2B_OPER_MSI_L2A_DS_2BPS_20251010T075840_S20251010T054029_N05.11', 's2:reflectance_conversion_factor': 1.00123274471918, 'datetime': '2025-10-10T05:43:54.687000Z', 's2:sequence': '0', 'earthsearch:s3_path': 's3://sentinel-cogs/sentinel-s2-l2a-cogs/43/Q/CA/2025/10/S2B_43QCA_20251010_0_L2A', 'earthsearch:payload_id': 'roda-sentinel2/workflow-sentinel2-to-stac/578d34e2cc2a0be237fbabc94a0b7197', 'earthsearch:boa_offset_applied': True, 'processing:software': {'sentinel2-to-stac': '2025.03.06'}, 'updated': '2025-10-10T09:14:37.443Z', 'proj:code': 'EPSG:32643'}
</code></pre>
<div class="highlight"><pre><span></span><code><span class="c1"># Let us add a filter on the cloud cover to select the only scenes</span>
<span class="c1">#   with less than 15% cloud coverage</span>

<span class="n">bbox</span> <span class="o">=</span> <span class="n">point</span><span class="o">.</span><span class="n">buffer</span><span class="p">(</span><span class="mf">0.1</span><span class="p">)</span><span class="o">.</span><span class="n">bounds</span>
<span class="n">search</span> <span class="o">=</span> <span class="n">client</span><span class="o">.</span><span class="n">search</span><span class="p">(</span>
    <span class="n">collections</span><span class="o">=</span><span class="p">[</span><span class="n">collection</span><span class="p">],</span>
    <span class="n">bbox</span><span class="o">=</span><span class="n">bbox</span><span class="p">,</span>
    <span class="n">datetime</span><span class="o">=</span><span class="s2">&quot;2020-03-20/2020-03-30&quot;</span><span class="p">,</span>
    <span class="n">query</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;eo:cloud_cover&lt;15&quot;</span><span class="p">]</span>
<span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">search</span><span class="o">.</span><span class="n">matched</span><span class="p">())</span>
</code></pre></div>
<pre><code>6
</code></pre>
<div class="highlight"><pre><span></span><code><span class="n">items</span> <span class="o">=</span> <span class="n">search</span><span class="o">.</span><span class="n">item_collection</span><span class="p">()</span>
<span class="n">items</span><span class="o">.</span><span class="n">save_object</span><span class="p">(</span><span class="s2">&quot;search.json&quot;</span><span class="p">)</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code><span class="n">assets</span> <span class="o">=</span> <span class="n">items</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">assets</span>  <span class="c1"># first item&#39;s asset dictionary</span>
<span class="nb">print</span><span class="p">(</span><span class="n">assets</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span>
</code></pre></div>
<pre><code>dict_keys(['aot', 'blue', 'coastal', 'granule_metadata', 'green', 'nir', 'nir08', 'nir09', 'red', 'rededge1', 'rededge2', 'rededge3', 'scl', 'swir16', 'swir22', 'thumbnail', 'tileinfo_metadata', 'visual', 'wvp', 'aot-jp2', 'blue-jp2', 'coastal-jp2', 'green-jp2', 'nir-jp2', 'nir08-jp2', 'nir09-jp2', 'red-jp2', 'rededge1-jp2', 'rededge2-jp2', 'rededge3-jp2', 'scl-jp2', 'swir16-jp2', 'swir22-jp2', 'visual-jp2', 'wvp-jp2'])
</code></pre>
<div class="highlight"><pre><span></span><code><span class="c1"># We can print a minimal description of the available assets</span>
<span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">asset</span> <span class="ow">in</span> <span class="n">assets</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">key</span><span class="si">}</span><span class="s2">: </span><span class="si">{</span><span class="n">asset</span><span class="o">.</span><span class="n">title</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</code></pre></div>
<pre><code>aot: Aerosol optical thickness (AOT)
blue: Blue (band 2) - 10m
coastal: Coastal aerosol (band 1) - 60m
granule_metadata: None
green: Green (band 3) - 10m
nir: NIR 1 (band 8) - 10m
nir08: NIR 2 (band 8A) - 20m
nir09: NIR 3 (band 9) - 60m
red: Red (band 4) - 10m
rededge1: Red edge 1 (band 5) - 20m
rededge2: Red edge 2 (band 6) - 20m
rededge3: Red edge 3 (band 7) - 20m
scl: Scene classification map (SCL)
swir16: SWIR 1 (band 11) - 20m
swir22: SWIR 2 (band 12) - 20m
thumbnail: Thumbnail image
tileinfo_metadata: None
visual: True color image
wvp: Water vapour (WVP)
aot-jp2: Aerosol optical thickness (AOT)
blue-jp2: Blue (band 2) - 10m
coastal-jp2: Coastal aerosol (band 1) - 60m
green-jp2: Green (band 3) - 10m
nir-jp2: NIR 1 (band 8) - 10m
nir08-jp2: NIR 2 (band 8A) - 20m
nir09-jp2: NIR 3 (band 9) - 60m
red-jp2: Red (band 4) - 10m
rededge1-jp2: Red edge 1 (band 5) - 20m
rededge2-jp2: Red edge 2 (band 6) - 20m
rededge3-jp2: Red edge 3 (band 7) - 20m
scl-jp2: Scene classification map (SCL)
swir16-jp2: SWIR 1 (band 11) - 20m
swir22-jp2: SWIR 2 (band 12) - 20m
visual-jp2: True color image
wvp-jp2: Water vapour (WVP)
</code></pre>
<div class="highlight"><pre><span></span><code><span class="sd">&#39;&#39;&#39; Among the other data files, assets include multiple raster data files</span>
<span class="sd">    (one per optical band, as acquired by the multi-spectral instrument),</span>
<span class="sd">    a thumbnail, a true-color image (‚Äúvisual‚Äù), instrument metadata and</span>
<span class="sd">    scene-classification information (‚ÄúSCL‚Äù). Let‚Äôs get the URL link</span>
<span class="sd">    to the thumbnail, which gives us a glimpse of the Sentinel-2 scene.</span>
<span class="sd">&#39;&#39;&#39;</span>
<span class="nb">print</span><span class="p">(</span><span class="n">assets</span><span class="p">[</span><span class="s2">&quot;thumbnail&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">href</span><span class="p">)</span>
</code></pre></div>
<pre><code>https://sentinel-cogs.s3.us-west-2.amazonaws.com/sentinel-s2-l2a-cogs/43/Q/CA/2020/3/S2B_43QCA_20200330_1_L2A/thumbnail.jpg
</code></pre>
<div class="highlight"><pre><span></span><code><span class="c1"># In order to open the satellite images and investigate the scenes in more detail,</span>
<span class="c1">#   we will be using the rioxarray library. Let us first install it.</span>
<span class="err">!</span><span class="n">pip</span> <span class="n">install</span> <span class="n">rioxarray</span>
</code></pre></div>
<pre><code>Collecting rioxarray
  Downloading rioxarray-0.19.0-py3-none-any.whl.metadata (5.5 kB)
Requirement already satisfied: packaging in /usr/local/lib/python3.12/dist-packages (from rioxarray) (25.0)
Collecting rasterio&gt;=1.4.3 (from rioxarray)
  Downloading rasterio-1.4.3-cp312-cp312-manylinux_2_17_x86_64.manylinux2014_x86_64.whl.metadata (9.1 kB)
Requirement already satisfied: xarray&gt;=2024.7.0 in /usr/local/lib/python3.12/dist-packages (from rioxarray) (2025.10.1)
Requirement already satisfied: pyproj&gt;=3.3 in /usr/local/lib/python3.12/dist-packages (from rioxarray) (3.7.2)
Requirement already satisfied: numpy&gt;=1.23 in /usr/local/lib/python3.12/dist-packages (from rioxarray) (2.0.2)
Requirement already satisfied: certifi in /usr/local/lib/python3.12/dist-packages (from pyproj&gt;=3.3-&gt;rioxarray) (2025.10.5)
Collecting affine (from rasterio&gt;=1.4.3-&gt;rioxarray)
  Downloading affine-2.4.0-py3-none-any.whl.metadata (4.0 kB)
Requirement already satisfied: attrs in /usr/local/lib/python3.12/dist-packages (from rasterio&gt;=1.4.3-&gt;rioxarray) (25.4.0)
Requirement already satisfied: click&gt;=4.0 in /usr/local/lib/python3.12/dist-packages (from rasterio&gt;=1.4.3-&gt;rioxarray) (8.3.0)
Collecting cligj&gt;=0.5 (from rasterio&gt;=1.4.3-&gt;rioxarray)
  Downloading cligj-0.7.2-py3-none-any.whl.metadata (5.0 kB)
Collecting click-plugins (from rasterio&gt;=1.4.3-&gt;rioxarray)
  Downloading click_plugins-1.1.1.2-py2.py3-none-any.whl.metadata (6.5 kB)
Requirement already satisfied: pyparsing in /usr/local/lib/python3.12/dist-packages (from rasterio&gt;=1.4.3-&gt;rioxarray) (3.2.5)
Requirement already satisfied: pandas&gt;=2.2 in /usr/local/lib/python3.12/dist-packages (from xarray&gt;=2024.7.0-&gt;rioxarray) (2.2.2)
Requirement already satisfied: python-dateutil&gt;=2.8.2 in /usr/local/lib/python3.12/dist-packages (from pandas&gt;=2.2-&gt;xarray&gt;=2024.7.0-&gt;rioxarray) (2.9.0.post0)
Requirement already satisfied: pytz&gt;=2020.1 in /usr/local/lib/python3.12/dist-packages (from pandas&gt;=2.2-&gt;xarray&gt;=2024.7.0-&gt;rioxarray) (2025.2)
Requirement already satisfied: tzdata&gt;=2022.7 in /usr/local/lib/python3.12/dist-packages (from pandas&gt;=2.2-&gt;xarray&gt;=2024.7.0-&gt;rioxarray) (2025.2)
Requirement already satisfied: six&gt;=1.5 in /usr/local/lib/python3.12/dist-packages (from python-dateutil&gt;=2.8.2-&gt;pandas&gt;=2.2-&gt;xarray&gt;=2024.7.0-&gt;rioxarray) (1.17.0)
Downloading rioxarray-0.19.0-py3-none-any.whl (62 kB)
[2K   [90m‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ[0m [32m62.2/62.2 kB[0m [31m3.9 MB/s[0m eta [36m0:00:00[0m
[?25hDownloading rasterio-1.4.3-cp312-cp312-manylinux_2_17_x86_64.manylinux2014_x86_64.whl (22.3 MB)
[2K   [90m‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ[0m [32m22.3/22.3 MB[0m [31m95.9 MB/s[0m eta [36m0:00:00[0m
[?25hDownloading cligj-0.7.2-py3-none-any.whl (7.1 kB)
Downloading affine-2.4.0-py3-none-any.whl (15 kB)
Downloading click_plugins-1.1.1.2-py2.py3-none-any.whl (11 kB)
Installing collected packages: cligj, click-plugins, affine, rasterio, rioxarray
Successfully installed affine-2.4.0 click-plugins-1.1.1.2 cligj-0.7.2 rasterio-1.4.3 rioxarray-0.19.0
</code></pre>
<div class="highlight"><pre><span></span><code><span class="sd">&#39;&#39;&#39; Let us focus on the NIR band by accessing the item NIR from the</span>
<span class="sd">      assets dictionary and get the URL attribute using .href</span>
<span class="sd">      after the item selection.</span>
<span class="sd">&#39;&#39;&#39;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">rioxarray</span>
<span class="n">nir_href</span> <span class="o">=</span> <span class="n">assets</span><span class="p">[</span><span class="s2">&quot;nir&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">href</span>
<span class="n">nir</span> <span class="o">=</span> <span class="n">rioxarray</span><span class="o">.</span><span class="n">open_rasterio</span><span class="p">(</span><span class="n">nir_href</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">nir</span><span class="p">)</span>
</code></pre></div>
<pre><code>&lt;xarray.DataArray (band: 1, y: 10980, x: 10980)&gt; Size: 241MB
[120560400 values with dtype=uint16]
Coordinates:
  * band         (band) int64 8B 1
  * y            (y) float64 88kB 2.1e+06 2.1e+06 2.1e+06 ... 1.99e+06 1.99e+06
  * x            (x) float64 88kB 3e+05 3e+05 3e+05 ... 4.098e+05 4.098e+05
    spatial_ref  int64 8B 0
Attributes:
    OVR_RESAMPLING_ALG:  AVERAGE
    AREA_OR_POINT:       Area
    _FillValue:          0
    scale_factor:        1.0
    add_offset:          0.0
</code></pre>
<div class="highlight"><pre><span></span><code><span class="c1"># We can save the whole image using the to_raster method</span>
<span class="n">nir</span><span class="o">.</span><span class="n">rio</span><span class="o">.</span><span class="n">to_raster</span><span class="p">(</span><span class="s2">&quot;nir.tif&quot;</span><span class="p">)</span>
</code></pre></div>
<p>Saving the entire tile might take a while, given there are over 10000 x 10000 = a hundred million pixels in the 10-meter NIR band. But we can take a smaller subset before downloading it. Because the raster is a Cloud optimized geotiff (COG), we can download just what we need!</p>
<p>In order to do that, we are using rioxarray's <code>clip_box</code> with which you can set a bounding box defining the area you want.</p>
<div class="highlight"><pre><span></span><code><span class="c1"># Saving a portion of the image</span>

<span class="n">nir_subset</span> <span class="o">=</span> <span class="n">nir</span><span class="o">.</span><span class="n">rio</span><span class="o">.</span><span class="n">clip_box</span><span class="p">(</span>
    <span class="n">minx</span><span class="o">=</span><span class="mf">73.415</span><span class="p">,</span>
    <span class="n">miny</span><span class="o">=</span><span class="mf">18.315</span><span class="p">,</span>
    <span class="n">maxx</span><span class="o">=</span><span class="mf">73.635</span><span class="p">,</span>
    <span class="n">maxy</span><span class="o">=</span><span class="mf">18.420</span><span class="p">,</span>
    <span class="n">crs</span><span class="o">=</span><span class="s2">&quot;EPSG:4326&quot;</span><span class="p">,</span>
<span class="p">)</span>

<span class="n">nir_subset</span><span class="o">.</span><span class="n">rio</span><span class="o">.</span><span class="n">to_raster</span><span class="p">(</span><span class="s2">&quot;nir_subset.tif&quot;</span><span class="p">)</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code><span class="c1"># Look at the size difference of the 2 files</span>
<span class="err">!</span><span class="n">ls</span> <span class="o">-</span><span class="n">l</span> <span class="o">--</span><span class="n">block</span><span class="o">-</span><span class="n">size</span><span class="o">=</span><span class="n">M</span>
</code></pre></div>
<pre><code>total 187M
-rw-r--r-- 1 root root   6M Oct 12 16:09 nir_subset.tif
-rw-r--r-- 1 root root 182M Oct 12 16:09 nir.tif
drwxr-xr-x 1 root root   1M Oct  9 13:36 sample_data
-rw-r--r-- 1 root root   1M Oct 12 16:08 search.json
</code></pre>
<h2 id="visualize-raster-data-and-metadata">Visualize raster data and metadata</h2>
<p>Here we will see different stretching techniques to visualize single and multi-band raster data</p>
<div class="highlight"><pre><span></span><code><span class="c1"># Display the nir_subset image with coordinates in EPSG:4326</span>
<span class="n">nir_subset_4326</span> <span class="o">=</span> <span class="n">nir_subset</span><span class="o">.</span><span class="n">rio</span><span class="o">.</span><span class="n">reproject</span><span class="p">(</span><span class="s2">&quot;EPSG:4326&quot;</span><span class="p">)</span>
<span class="n">nir_subset_4326</span><span class="o">.</span><span class="n">plot</span><span class="p">()</span>
</code></pre></div>
<pre><code>&lt;matplotlib.collections.QuadMesh at 0x790b1e712240&gt;
</code></pre>
<p><img alt="png" src="../NWA_Cloud_based_Geospatial_data_processing_files/NWA_Cloud_based_Geospatial_data_processing_26_1.png" /></p>
<div class="highlight"><pre><span></span><code><span class="c1"># View the metadata of the raster</span>
<span class="nb">print</span><span class="p">(</span><span class="n">nir_subset_4326</span><span class="o">.</span><span class="n">rio</span><span class="o">.</span><span class="n">crs</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">nir_subset_4326</span><span class="o">.</span><span class="n">rio</span><span class="o">.</span><span class="n">nodata</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">nir_subset_4326</span><span class="o">.</span><span class="n">rio</span><span class="o">.</span><span class="n">bounds</span><span class="p">())</span>
<span class="nb">print</span><span class="p">(</span><span class="n">nir_subset_4326</span><span class="o">.</span><span class="n">rio</span><span class="o">.</span><span class="n">width</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">nir_subset_4326</span><span class="o">.</span><span class="n">rio</span><span class="o">.</span><span class="n">height</span><span class="p">)</span>
</code></pre></div>
<pre><code>EPSG:4326
0
(73.41403180205022, 18.313219852280874, 73.63587510600816, 18.421749536289045)
2365
1157
</code></pre>
<div class="highlight"><pre><span></span><code><span class="c1"># The option robust=True will forces displaying values between</span>
<span class="c1">#   the 2nd and 98th percentile</span>
<span class="n">nir_subset_4326</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">robust</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</code></pre></div>
<pre><code>&lt;matplotlib.collections.QuadMesh at 0x790b1d72c890&gt;
</code></pre>
<p><img alt="png" src="../NWA_Cloud_based_Geospatial_data_processing_files/NWA_Cloud_based_Geospatial_data_processing_28_1.png" /></p>
<div class="highlight"><pre><span></span><code><span class="n">nir_subset_4326</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">vmin</span><span class="o">=</span><span class="mi">500</span><span class="p">,</span> <span class="n">vmax</span><span class="o">=</span><span class="mi">3000</span><span class="p">)</span>
</code></pre></div>
<pre><code>&lt;matplotlib.collections.QuadMesh at 0x790b1e75b770&gt;
</code></pre>
<p><img alt="png" src="../NWA_Cloud_based_Geospatial_data_processing_files/NWA_Cloud_based_Geospatial_data_processing_29_1.png" /></p>
<p><strong>Calculate Raster Statistics</strong></p>
<p>It is useful to know the minimum or maximum values of a raster dataset. We can compute these and other descriptive statistics with min, max, mean, and std.</p>
<div class="highlight"><pre><span></span><code><span class="nb">print</span><span class="p">(</span><span class="n">nir_subset_4326</span><span class="o">.</span><span class="n">min</span><span class="p">())</span>
<span class="nb">print</span><span class="p">(</span><span class="n">nir_subset_4326</span><span class="o">.</span><span class="n">max</span><span class="p">())</span>
<span class="nb">print</span><span class="p">(</span><span class="n">nir_subset_4326</span><span class="o">.</span><span class="n">mean</span><span class="p">())</span>
<span class="nb">print</span><span class="p">(</span><span class="n">nir_subset_4326</span><span class="o">.</span><span class="n">std</span><span class="p">())</span>
</code></pre></div>
<pre><code>&lt;xarray.DataArray ()&gt; Size: 2B
array(0, dtype=uint16)
Coordinates:
    spatial_ref  int64 8B 0
&lt;xarray.DataArray ()&gt; Size: 2B
array(11680, dtype=uint16)
Coordinates:
    spatial_ref  int64 8B 0
&lt;xarray.DataArray ()&gt; Size: 8B
array(2143.59940431)
Coordinates:
    spatial_ref  int64 8B 0
&lt;xarray.DataArray ()&gt; Size: 8B
array(965.8944251)
Coordinates:
    spatial_ref  int64 8B 0
</code></pre>
<div class="highlight"><pre><span></span><code><span class="c1"># If we want to see specific quantiles, we can use xarray‚Äôs .quantile() method.</span>
<span class="nb">print</span><span class="p">(</span><span class="n">nir_subset_4326</span><span class="o">.</span><span class="n">quantile</span><span class="p">([</span><span class="mf">0.25</span><span class="p">,</span> <span class="mf">0.75</span><span class="p">]))</span>
</code></pre></div>
<pre><code>&lt;xarray.DataArray (quantile: 2)&gt; Size: 16B
array([1846., 2640.])
Coordinates:
  * quantile  (quantile) float64 16B 0.25 0.75
</code></pre>
<div class="highlight"><pre><span></span><code><span class="n">raster_true_color</span> <span class="o">=</span> <span class="n">rioxarray</span><span class="o">.</span><span class="n">open_rasterio</span><span class="p">(</span><span class="n">items</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">assets</span><span class="p">[</span><span class="s1">&#39;visual&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">href</span><span class="p">,</span> <span class="n">overview_level</span><span class="o">=</span><span class="mi">3</span><span class="p">)</span>
<span class="n">raster_true_color</span><span class="o">.</span><span class="n">plot</span><span class="o">.</span><span class="n">imshow</span><span class="p">()</span>
</code></pre></div>
<pre><code>&lt;matplotlib.image.AxesImage at 0x790b1d322a80&gt;
</code></pre>
<p><img alt="png" src="../NWA_Cloud_based_Geospatial_data_processing_files/NWA_Cloud_based_Geospatial_data_processing_33_1.png" /></p>
<div class="highlight"><pre><span></span><code><span class="c1"># To plot a standard False Color Composite (FCC), we need the NIR, Red, and Green bands.</span>
<span class="c1"># We can open these directly from the assets.</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">xarray</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">xr</span>

<span class="n">red_href</span> <span class="o">=</span> <span class="n">items</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">assets</span><span class="p">[</span><span class="s1">&#39;red&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">href</span>
<span class="n">green_href</span> <span class="o">=</span> <span class="n">items</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">assets</span><span class="p">[</span><span class="s1">&#39;green&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">href</span>
<span class="n">nir_href</span> <span class="o">=</span> <span class="n">items</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">assets</span><span class="p">[</span><span class="s1">&#39;nir&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">href</span>

<span class="c1"># Open the bands using rioxarray</span>
<span class="n">red</span> <span class="o">=</span> <span class="n">rioxarray</span><span class="o">.</span><span class="n">open_rasterio</span><span class="p">(</span><span class="n">red_href</span><span class="p">,</span> <span class="n">overview_level</span><span class="o">=</span><span class="mi">3</span><span class="p">)</span>
<span class="n">green</span> <span class="o">=</span> <span class="n">rioxarray</span><span class="o">.</span><span class="n">open_rasterio</span><span class="p">(</span><span class="n">green_href</span><span class="p">,</span> <span class="n">overview_level</span><span class="o">=</span><span class="mi">3</span><span class="p">)</span>
<span class="n">nir</span> <span class="o">=</span> <span class="n">rioxarray</span><span class="o">.</span><span class="n">open_rasterio</span><span class="p">(</span><span class="n">nir_href</span><span class="p">,</span> <span class="n">overview_level</span><span class="o">=</span><span class="mi">3</span><span class="p">)</span>

<span class="c1"># Stack the bands in the order NIR, Red, Green for a standard FCC</span>
<span class="c1"># This might require reprojecting bands to a common CRS if they differ,</span>
<span class="c1"># but for Sentinel-2 L2A COGs from the same item, they should align.</span>
<span class="c1"># We will stack them along a new dimension.</span>
<span class="n">fcc</span> <span class="o">=</span> <span class="n">xr</span><span class="o">.</span><span class="n">concat</span><span class="p">([</span><span class="n">nir</span><span class="p">,</span> <span class="n">red</span><span class="p">,</span> <span class="n">green</span><span class="p">],</span> <span class="n">dim</span><span class="o">=</span><span class="s2">&quot;band&quot;</span><span class="p">)</span>

<span class="c1"># Plot the FCC</span>
<span class="c1"># The imshow function expects dimensions in the order (y, x, band)</span>
<span class="c1"># We need to swap the band dimension to the last position</span>
<span class="n">fcc</span><span class="o">.</span><span class="n">plot</span><span class="o">.</span><span class="n">imshow</span><span class="p">(</span><span class="n">robust</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</code></pre></div>
<pre><code>&lt;matplotlib.image.AxesImage at 0x790b1dfbe1b0&gt;
</code></pre>
<p><img alt="png" src="../NWA_Cloud_based_Geospatial_data_processing_files/NWA_Cloud_based_Geospatial_data_processing_34_1.png" /></p>
<div class="highlight"><pre><span></span><code><span class="c1"># Panshet dam area</span>
<span class="n">minx</span><span class="o">=</span><span class="mf">73.415</span>
<span class="n">miny</span><span class="o">=</span><span class="mf">18.315</span>
<span class="n">maxx</span><span class="o">=</span><span class="mf">73.635</span>
<span class="n">maxy</span><span class="o">=</span><span class="mf">18.420</span>
</code></pre></div>
<h2 id="processing-2-time-period-data-and-doing-change-detection">Processing 2 time period data and doing change detection</h2>
<p>Analyze the change in surface water area of the Panshet dam between the pre-monsoon and post-monsoon seasons of 2024 using Sentinel-2 L2A data. Calculate the NDWI for both periods, threshold it to identify water bodies, and quantify the change in water area in square kilometers. Visualize the NDWI images and the change.</p>
<div class="highlight"><pre><span></span><code><span class="c1"># Search for data for the pre-monsoon period in 2024</span>
<span class="n">search_pre_monsoon</span> <span class="o">=</span> <span class="n">client</span><span class="o">.</span><span class="n">search</span><span class="p">(</span>
    <span class="n">collections</span><span class="o">=</span><span class="p">[</span><span class="n">collection</span><span class="p">],</span>
    <span class="n">bbox</span><span class="o">=</span><span class="p">[</span><span class="n">minx</span><span class="p">,</span> <span class="n">miny</span><span class="p">,</span> <span class="n">maxx</span><span class="p">,</span> <span class="n">maxy</span><span class="p">],</span>
    <span class="n">datetime</span><span class="o">=</span><span class="s2">&quot;2024-03-01/2024-05-31&quot;</span><span class="p">,</span>
    <span class="n">query</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;eo:cloud_cover&lt;2&quot;</span><span class="p">]</span>
<span class="p">)</span>

<span class="c1"># Print the number of matched items for the pre-monsoon search</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Matched items for the pre-monsoon period: </span><span class="si">{</span><span class="n">search_pre_monsoon</span><span class="o">.</span><span class="n">matched</span><span class="p">()</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

<span class="c1"># Search for data for the post-monsoon period in 2024</span>
<span class="n">search_post_monsoon</span> <span class="o">=</span> <span class="n">client</span><span class="o">.</span><span class="n">search</span><span class="p">(</span>
    <span class="n">collections</span><span class="o">=</span><span class="p">[</span><span class="n">collection</span><span class="p">],</span>
    <span class="n">bbox</span><span class="o">=</span><span class="p">[</span><span class="n">minx</span><span class="p">,</span> <span class="n">miny</span><span class="p">,</span> <span class="n">maxx</span><span class="p">,</span> <span class="n">maxy</span><span class="p">],</span>
    <span class="n">datetime</span><span class="o">=</span><span class="s2">&quot;2024-10-01/2024-12-31&quot;</span><span class="p">,</span>
    <span class="n">query</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;eo:cloud_cover&lt;2&quot;</span><span class="p">]</span>
<span class="p">)</span>

<span class="c1"># Print the number of matched items for the post-monsoon search</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Matched items for the post-monsoon period: </span><span class="si">{</span><span class="n">search_post_monsoon</span><span class="o">.</span><span class="n">matched</span><span class="p">()</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</code></pre></div>
<pre><code>Matched items for the pre-monsoon period: 12
Matched items for the post-monsoon period: 6
</code></pre>
<p>The NDWI (Normalized Difference Water Index) formula for Sentinel-2 is <code>(B3 - B8) / (B3 + B8)</code>, where <code>B3</code> is the Green band and <code>B8</code> is the Near-Infrared (NIR) band. This formula highlights water bodies because water absorbs NIR light while reflecting green light, resulting in positive NDWI values that indicate the presence of water.  </p>
<div class="highlight"><pre><span></span><code><span class="c1"># Access the item collections</span>
<span class="n">items_pre_monsoon</span> <span class="o">=</span> <span class="n">search_pre_monsoon</span><span class="o">.</span><span class="n">item_collection</span><span class="p">()</span>
<span class="n">items_post_monsoon</span> <span class="o">=</span> <span class="n">search_post_monsoon</span><span class="o">.</span><span class="n">item_collection</span><span class="p">()</span>

<span class="c1"># Select the first item from each collection</span>
<span class="n">item_pre_monsoon</span> <span class="o">=</span> <span class="n">items_pre_monsoon</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
<span class="n">item_post_monsoon</span> <span class="o">=</span> <span class="n">items_post_monsoon</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>

<span class="c1"># Access &#39;green&#39; and &#39;nir&#39; assets for the selected items</span>
<span class="n">green_pre_monsoon_href</span> <span class="o">=</span> <span class="n">item_pre_monsoon</span><span class="o">.</span><span class="n">assets</span><span class="p">[</span><span class="s1">&#39;green&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">href</span>
<span class="n">nir_pre_monsoon_href</span> <span class="o">=</span> <span class="n">item_pre_monsoon</span><span class="o">.</span><span class="n">assets</span><span class="p">[</span><span class="s1">&#39;nir&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">href</span>
<span class="n">green_post_monsoon_href</span> <span class="o">=</span> <span class="n">item_post_monsoon</span><span class="o">.</span><span class="n">assets</span><span class="p">[</span><span class="s1">&#39;green&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">href</span>
<span class="n">nir_post_monsoon_href</span> <span class="o">=</span> <span class="n">item_post_monsoon</span><span class="o">.</span><span class="n">assets</span><span class="p">[</span><span class="s1">&#39;nir&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">href</span>

<span class="c1"># Open the bands using rioxarray without specifying overview_level</span>
<span class="n">green_pre_monsoon</span> <span class="o">=</span> <span class="n">rioxarray</span><span class="o">.</span><span class="n">open_rasterio</span><span class="p">(</span><span class="n">green_pre_monsoon_href</span><span class="p">)</span>
<span class="n">nir_pre_monsoon</span> <span class="o">=</span> <span class="n">rioxarray</span><span class="o">.</span><span class="n">open_rasterio</span><span class="p">(</span><span class="n">nir_pre_monsoon_href</span><span class="p">)</span>
<span class="n">green_post_monsoon</span> <span class="o">=</span> <span class="n">rioxarray</span><span class="o">.</span><span class="n">open_rasterio</span><span class="p">(</span><span class="n">green_post_monsoon_href</span><span class="p">)</span>
<span class="n">nir_post_monsoon</span> <span class="o">=</span> <span class="n">rioxarray</span><span class="o">.</span><span class="n">open_rasterio</span><span class="p">(</span><span class="n">nir_post_monsoon_href</span><span class="p">)</span>

<span class="c1"># Clip the bands to the Panshet dam area</span>
<span class="n">green_pre_monsoon_clipped</span> <span class="o">=</span> <span class="n">green_pre_monsoon</span><span class="o">.</span><span class="n">rio</span><span class="o">.</span><span class="n">clip_box</span><span class="p">(</span><span class="n">minx</span><span class="o">=</span><span class="n">minx</span><span class="p">,</span> <span class="n">miny</span><span class="o">=</span><span class="n">miny</span><span class="p">,</span> <span class="n">maxx</span><span class="o">=</span><span class="n">maxx</span><span class="p">,</span> <span class="n">maxy</span><span class="o">=</span><span class="n">maxy</span><span class="p">,</span> <span class="n">crs</span><span class="o">=</span><span class="s2">&quot;EPSG:4326&quot;</span><span class="p">)</span>
<span class="n">nir_pre_monsoon_clipped</span> <span class="o">=</span> <span class="n">nir_pre_monsoon</span><span class="o">.</span><span class="n">rio</span><span class="o">.</span><span class="n">clip_box</span><span class="p">(</span><span class="n">minx</span><span class="o">=</span><span class="n">minx</span><span class="p">,</span> <span class="n">miny</span><span class="o">=</span><span class="n">miny</span><span class="p">,</span> <span class="n">maxx</span><span class="o">=</span><span class="n">maxx</span><span class="p">,</span> <span class="n">maxy</span><span class="o">=</span><span class="n">maxy</span><span class="p">,</span> <span class="n">crs</span><span class="o">=</span><span class="s2">&quot;EPSG:4326&quot;</span><span class="p">)</span>
<span class="n">green_post_monsoon_clipped</span> <span class="o">=</span> <span class="n">green_post_monsoon</span><span class="o">.</span><span class="n">rio</span><span class="o">.</span><span class="n">clip_box</span><span class="p">(</span><span class="n">minx</span><span class="o">=</span><span class="n">minx</span><span class="p">,</span> <span class="n">miny</span><span class="o">=</span><span class="n">miny</span><span class="p">,</span> <span class="n">maxx</span><span class="o">=</span><span class="n">maxx</span><span class="p">,</span> <span class="n">maxy</span><span class="o">=</span><span class="n">maxy</span><span class="p">,</span> <span class="n">crs</span><span class="o">=</span><span class="s2">&quot;EPSG:4326&quot;</span><span class="p">)</span>
<span class="n">nir_post_monsoon_clipped</span> <span class="o">=</span> <span class="n">nir_post_monsoon</span><span class="o">.</span><span class="n">rio</span><span class="o">.</span><span class="n">clip_box</span><span class="p">(</span><span class="n">minx</span><span class="o">=</span><span class="n">minx</span><span class="p">,</span> <span class="n">miny</span><span class="o">=</span><span class="n">miny</span><span class="p">,</span> <span class="n">maxx</span><span class="o">=</span><span class="n">maxx</span><span class="p">,</span> <span class="n">maxy</span><span class="o">=</span><span class="n">maxy</span><span class="p">,</span> <span class="n">crs</span><span class="o">=</span><span class="s2">&quot;EPSG:4326&quot;</span><span class="p">)</span>

<span class="c1"># Display shapes to verify clipping</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Shape of green_pre_monsoon_clipped:&quot;</span><span class="p">,</span> <span class="n">green_pre_monsoon_clipped</span><span class="o">.</span><span class="n">shape</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Shape of nir_pre_monsoon_clipped:&quot;</span><span class="p">,</span> <span class="n">nir_pre_monsoon_clipped</span><span class="o">.</span><span class="n">shape</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Shape of green_post_monsoon_clipped:&quot;</span><span class="p">,</span> <span class="n">green_post_monsoon_clipped</span><span class="o">.</span><span class="n">shape</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Shape of nir_post_monsoon_clipped:&quot;</span><span class="p">,</span> <span class="n">nir_post_monsoon_clipped</span><span class="o">.</span><span class="n">shape</span><span class="p">)</span>
</code></pre></div>
<pre><code>Shape of green_pre_monsoon_clipped: (1, 1182, 2335)
Shape of nir_pre_monsoon_clipped: (1, 1182, 2335)
Shape of green_post_monsoon_clipped: (1, 1182, 2335)
Shape of nir_post_monsoon_clipped: (1, 1182, 2335)
</code></pre>
<div class="highlight"><pre><span></span><code><span class="kn">import</span><span class="w"> </span><span class="nn">matplotlib.pyplot</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">plt</span>

<span class="c1"># Create a figure with two subplots</span>
<span class="n">fig</span><span class="p">,</span> <span class="n">axes</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">12</span><span class="p">,</span> <span class="mi">6</span><span class="p">))</span>

<span class="c1"># Plot the pre-monsoon true color image in the first subplot</span>
<span class="n">raster_true_color_pre_monsoon</span> <span class="o">=</span> <span class="n">rioxarray</span><span class="o">.</span><span class="n">open_rasterio</span><span class="p">(</span><span class="n">item_pre_monsoon</span><span class="o">.</span><span class="n">assets</span><span class="p">[</span><span class="s1">&#39;visual&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">href</span><span class="p">,</span> <span class="n">overview_level</span><span class="o">=</span><span class="mi">3</span><span class="p">)</span>
<span class="n">raster_true_color_pre_monsoon</span> <span class="o">=</span> <span class="n">raster_true_color_pre_monsoon</span><span class="o">.</span><span class="n">rio</span><span class="o">.</span><span class="n">clip_box</span><span class="p">(</span><span class="n">minx</span><span class="o">=</span><span class="n">minx</span><span class="p">,</span> <span class="n">miny</span><span class="o">=</span><span class="n">miny</span><span class="p">,</span> <span class="n">maxx</span><span class="o">=</span><span class="n">maxx</span><span class="p">,</span> <span class="n">maxy</span><span class="o">=</span><span class="n">maxy</span><span class="p">,</span> <span class="n">crs</span><span class="o">=</span><span class="s2">&quot;EPSG:4326&quot;</span><span class="p">)</span>
<span class="n">raster_true_color_pre_monsoon</span><span class="o">.</span><span class="n">plot</span><span class="o">.</span><span class="n">imshow</span><span class="p">(</span><span class="n">ax</span><span class="o">=</span><span class="n">axes</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
<span class="n">axes</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="s2">&quot;Pre-monsoon True Color (2024)&quot;</span><span class="p">)</span>

<span class="c1"># Plot the post-monsoon true color image in the second subplot</span>
<span class="n">raster_true_color_post_monsoon</span> <span class="o">=</span> <span class="n">rioxarray</span><span class="o">.</span><span class="n">open_rasterio</span><span class="p">(</span><span class="n">item_post_monsoon</span><span class="o">.</span><span class="n">assets</span><span class="p">[</span><span class="s1">&#39;visual&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">href</span><span class="p">,</span> <span class="n">overview_level</span><span class="o">=</span><span class="mi">3</span><span class="p">)</span>
<span class="n">raster_true_color_post_monsoon</span> <span class="o">=</span> <span class="n">raster_true_color_post_monsoon</span><span class="o">.</span><span class="n">rio</span><span class="o">.</span><span class="n">clip_box</span><span class="p">(</span><span class="n">minx</span><span class="o">=</span><span class="n">minx</span><span class="p">,</span> <span class="n">miny</span><span class="o">=</span><span class="n">miny</span><span class="p">,</span> <span class="n">maxx</span><span class="o">=</span><span class="n">maxx</span><span class="p">,</span> <span class="n">maxy</span><span class="o">=</span><span class="n">maxy</span><span class="p">,</span> <span class="n">crs</span><span class="o">=</span><span class="s2">&quot;EPSG:4326&quot;</span><span class="p">)</span>
<span class="n">raster_true_color_post_monsoon</span><span class="o">.</span><span class="n">plot</span><span class="o">.</span><span class="n">imshow</span><span class="p">(</span><span class="n">ax</span><span class="o">=</span><span class="n">axes</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
<span class="n">axes</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="s2">&quot;Post-monsoon True Color (2024)&quot;</span><span class="p">)</span>

<span class="c1"># Add a main title to the figure</span>
<span class="n">fig</span><span class="o">.</span><span class="n">suptitle</span><span class="p">(</span><span class="s2">&quot;True Color Image Comparison: Pre-monsoon vs. Post-monsoon 2024&quot;</span><span class="p">,</span> <span class="n">fontsize</span><span class="o">=</span><span class="mi">16</span><span class="p">)</span>

<span class="c1"># Adjust layout to prevent titles from overlapping</span>
<span class="n">plt</span><span class="o">.</span><span class="n">tight_layout</span><span class="p">(</span><span class="n">rect</span><span class="o">=</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mf">0.03</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mf">0.95</span><span class="p">])</span> <span class="c1"># Adjust rect to make space for suptitle</span>

<span class="c1"># Display the plot</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</code></pre></div>
<p><img alt="png" src="../NWA_Cloud_based_Geospatial_data_processing_files/NWA_Cloud_based_Geospatial_data_processing_40_0.png" /></p>
<div class="highlight"><pre><span></span><code><span class="c1"># Calculate NDWI - pre-monsoon</span>
<span class="n">ndwi_pre_monsoon</span> <span class="o">=</span> <span class="p">(</span><span class="n">green_pre_monsoon_clipped</span> <span class="o">-</span> <span class="n">nir_pre_monsoon_clipped</span><span class="p">)</span> <span class="o">/</span> <span class="p">(</span><span class="n">green_pre_monsoon_clipped</span> <span class="o">+</span> <span class="n">nir_pre_monsoon_clipped</span><span class="p">)</span>
<span class="n">ndwi_pre_monsoon</span> <span class="o">=</span> <span class="n">ndwi_pre_monsoon</span><span class="o">.</span><span class="n">clip</span><span class="p">(</span><span class="nb">min</span><span class="o">=-</span><span class="mi">1</span><span class="p">,</span> <span class="nb">max</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>  <span class="c1"># Clip values to the range [-1, 1]</span>
<span class="n">ndwi_pre_monsoon</span><span class="o">.</span><span class="n">attrs</span><span class="p">[</span><span class="s2">&quot;long_name&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;NDWI&quot;</span>

<span class="c1"># Calculate NDWI - pre-monsoon</span>
<span class="n">ndwi_post_monsoon</span> <span class="o">=</span> <span class="p">(</span><span class="n">green_post_monsoon_clipped</span> <span class="o">-</span> <span class="n">nir_post_monsoon_clipped</span><span class="p">)</span> <span class="o">/</span> <span class="p">(</span><span class="n">green_post_monsoon_clipped</span> <span class="o">+</span> <span class="n">nir_post_monsoon_clipped</span><span class="p">)</span>
<span class="n">ndwi_post_monsoon</span> <span class="o">=</span> <span class="n">ndwi_post_monsoon</span><span class="o">.</span><span class="n">clip</span><span class="p">(</span><span class="nb">min</span><span class="o">=-</span><span class="mi">1</span><span class="p">,</span> <span class="nb">max</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>  <span class="c1"># Clip values to the range [-1, 1]</span>
<span class="n">ndwi_post_monsoon</span><span class="o">.</span><span class="n">attrs</span><span class="p">[</span><span class="s2">&quot;long_name&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;NDWI&quot;</span>

<span class="c1"># Print shapes to confirm calculations</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Shape of ndwi_pre_monsoon:&quot;</span><span class="p">,</span> <span class="n">ndwi_pre_monsoon</span><span class="o">.</span><span class="n">shape</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Shape of ndwi_post_monsoon:&quot;</span><span class="p">,</span> <span class="n">ndwi_post_monsoon</span><span class="o">.</span><span class="n">shape</span><span class="p">)</span>
</code></pre></div>
<pre><code>Shape of ndwi_pre_monsoon: (1, 1182, 2335)
Shape of ndwi_post_monsoon: (1, 1182, 2335)
</code></pre>
<div class="highlight"><pre><span></span><code><span class="c1"># Define a threshold value for NDWI (adjust if necessary)</span>
<span class="c1"># A common threshold for NDWI is 1</span>
<span class="n">ndwi_threshold</span> <span class="o">=</span> <span class="mi">1</span>

<span class="c1"># Apply the threshold to create binary water masks</span>
<span class="n">water_mask_pre_monsoon</span> <span class="o">=</span> <span class="n">ndwi_pre_monsoon</span> <span class="o">&lt;</span> <span class="n">ndwi_threshold</span>
<span class="n">water_mask_post_monsoon</span> <span class="o">=</span> <span class="n">ndwi_post_monsoon</span> <span class="o">&lt;</span> <span class="n">ndwi_threshold</span>

<span class="c1"># Get the spatial resolution of the clipped NDWI images</span>
<span class="c1"># Assuming the clipped images retain the original resolution in meters</span>
<span class="c1"># Sentinel-2 L2A green and nir bands have a resolution of 10 meters</span>
<span class="n">pixel_resolution_meters</span> <span class="o">=</span> <span class="mi">10</span>

<span class="c1"># Calculate the area of a single pixel in square meters</span>
<span class="n">pixel_area_sq_meters</span> <span class="o">=</span> <span class="n">pixel_resolution_meters</span> <span class="o">*</span> <span class="n">pixel_resolution_meters</span>

<span class="c1"># Count the number of water pixels in each mask</span>
<span class="n">num_water_pixels_pre_monsoon</span> <span class="o">=</span> <span class="n">water_mask_pre_monsoon</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span><span class="o">.</span><span class="n">values</span>
<span class="n">num_water_pixels_post_monsoon</span> <span class="o">=</span> <span class="n">water_mask_post_monsoon</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span><span class="o">.</span><span class="n">values</span>

<span class="c1"># Calculate the water area in square meters</span>
<span class="n">water_area_sq_meters_pre_monsoon</span> <span class="o">=</span> <span class="n">num_water_pixels_pre_monsoon</span> <span class="o">*</span> <span class="n">pixel_area_sq_meters</span>
<span class="n">water_area_sq_meters_post_monsoon</span> <span class="o">=</span> <span class="n">num_water_pixels_post_monsoon</span> <span class="o">*</span> <span class="n">pixel_area_sq_meters</span>

<span class="c1"># Convert the water area from square meters to square kilometers (1 sq km = 1,000,000 sq meters)</span>
<span class="n">water_area_sq_km_pre_monsoon</span> <span class="o">=</span> <span class="n">water_area_sq_meters_pre_monsoon</span> <span class="o">/</span> <span class="mi">1_000_000</span>
<span class="n">water_area_sq_km_post_monsoon</span> <span class="o">=</span> <span class="n">water_area_sq_meters_post_monsoon</span> <span class="o">/</span> <span class="mi">1_000_000</span>

<span class="c1"># Print the calculated water areas</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Pre-monsoon water area: </span><span class="si">{</span><span class="n">water_area_sq_km_pre_monsoon</span><span class="si">:</span><span class="s2">.2f</span><span class="si">}</span><span class="s2"> sq km&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Post-monsoon water area: </span><span class="si">{</span><span class="n">water_area_sq_km_post_monsoon</span><span class="si">:</span><span class="s2">.2f</span><span class="si">}</span><span class="s2"> sq km&quot;</span><span class="p">)</span>
</code></pre></div>
<pre><code>Pre-monsoon water area: 15.22 sq km
Post-monsoon water area: 32.97 sq km
</code></pre>
<div class="highlight"><pre><span></span><code><span class="c1"># Calculate the difference in surface water area</span>
<span class="n">water_area_change_sq_km</span> <span class="o">=</span> <span class="n">water_area_sq_km_post_monsoon</span> <span class="o">-</span> <span class="n">water_area_sq_km_pre_monsoon</span>

<span class="c1"># Print the calculated change in water area</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Change in water area: </span><span class="si">{</span><span class="n">water_area_change_sq_km</span><span class="si">:</span><span class="s2">.2f</span><span class="si">}</span><span class="s2"> sq km&quot;</span><span class="p">)</span>
</code></pre></div>
<pre><code>Change in water area: 17.75 sq km
</code></pre>
<div class="highlight"><pre><span></span><code><span class="kn">import</span><span class="w"> </span><span class="nn">matplotlib.pyplot</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">plt</span>

<span class="c1"># Create a figure with two subplots</span>
<span class="n">fig</span><span class="p">,</span> <span class="n">axes</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">12</span><span class="p">,</span> <span class="mi">6</span><span class="p">))</span>

<span class="c1"># Define the discrete levels and colormap</span>
<span class="n">levels</span> <span class="o">=</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">]</span>
<span class="n">cmap</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">matplotlib</span><span class="o">.</span><span class="n">colors</span><span class="o">.</span><span class="n">ListedColormap</span><span class="p">([</span><span class="s1">&#39;black&#39;</span><span class="p">,</span> <span class="s1">&#39;white&#39;</span><span class="p">])</span>

<span class="c1"># Plot the pre-monsoon NDWI in the first subplot by selecting the single band</span>
<span class="n">water_mask_pre_monsoon</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">levels</span><span class="o">=</span><span class="n">levels</span><span class="p">,</span> <span class="n">cmap</span><span class="o">=</span><span class="n">cmap</span><span class="p">,</span> <span class="n">ax</span><span class="o">=</span><span class="n">axes</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
<span class="n">axes</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="s2">&quot;Pre-monsoon NDWI (2024)&quot;</span><span class="p">)</span>

<span class="c1"># Plot the post-monsoon NDWI in the second subplot by selecting the single band</span>
<span class="n">water_mask_post_monsoon</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">levels</span><span class="o">=</span><span class="n">levels</span><span class="p">,</span> <span class="n">cmap</span><span class="o">=</span><span class="n">cmap</span><span class="p">,</span> <span class="n">ax</span><span class="o">=</span><span class="n">axes</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
<span class="n">axes</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="s2">&quot;Post-monsoon NDWI (2024)&quot;</span><span class="p">)</span>

<span class="c1"># Add a main title to the figure</span>
<span class="n">fig</span><span class="o">.</span><span class="n">suptitle</span><span class="p">(</span><span class="s2">&quot;NDWI Comparison: Pre-monsoon vs. Post-monsoon 2024&quot;</span><span class="p">,</span> <span class="n">fontsize</span><span class="o">=</span><span class="mi">16</span><span class="p">)</span>

<span class="c1"># Adjust layout to prevent titles from overlapping</span>
<span class="n">plt</span><span class="o">.</span><span class="n">tight_layout</span><span class="p">(</span><span class="n">rect</span><span class="o">=</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mf">0.03</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mf">0.95</span><span class="p">])</span> <span class="c1"># Adjust rect to make space for suptitle</span>

<span class="c1"># Display the plot</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</code></pre></div>
<p><img alt="png" src="../NWA_Cloud_based_Geospatial_data_processing_files/NWA_Cloud_based_Geospatial_data_processing_44_0.png" /></p>
<iframe width="560" height="315" src="https://www.youtube.com/embed/iqPzPXMox0w" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" allowfullscreen></iframe>

<h2 id="lecture-visualization">Lecture Visualization</h2>
<p><embed src="pdfs/Cloud based Geospatial Data Processing.pdf" type="application/pdf" width="100%" height="600px" style="border-radius: 8px; box-shadow: 0 4px 6px rgba(0,0,0,0.1);" /></p>
<p align="center"><a href="pdfs/Cloud based Geospatial Data Processing.pdf" class="md-button md-button--primary">Download Lecture Slides</a></p>

<details class="info">
<summary>View Full Lecture Transcript</summary>
<p>The following content is extracted from the lecture slides.</p>
<p>10/13/2025</p>
<p>I N D I A N  I N S T I T U T E  O F  R E M O T E  S E N S I N G ,  D E H R A D U N</p>
<p>Cloud based Geospatial Data</p>
<p>Processing in Python</p>
<p>Prasun Kumar Gupta</p>
<p>Scientist/Engineer-'SF', Geoinformatics Department</p>
<p>Geospatial Technology and Outreach Program Group</p>
<p>Indian Institute of Remote Sensing (ISRO), Dehradun</p>
<p>prasun@iirs.gov.in</p>
<p>10/13/2025 1</p>
<p>Introduction</p>
<p>‚Ä¢ STAC, COG (Cloud Optimized GeoTIFF), and Xarray are three</p>
<p>technologies that work together in a powerful workflow for handling and</p>
<p>analyzing geospatial data.</p>
<p>Montero et al., 2024</p>
<p>10/13/2025</p>
<p>STAC</p>
<p>‚Ä¢ Started in 2018, rapidly developing</p>
<p>‚Ä¢ New de facto metadata and search standard</p>
<p>‚Ä¢ May become an OGC standard in the future.</p>
<p>‚Ä¢ Describes datasets at the level of individual files.</p>
<p>‚Ä¢ It is most commonly used for remote sensing</p>
<p>data, but it is suitable for any data with time and</p>
<p>location information.</p>
<p>‚Ä¢ Users: ESA, USGS, Microsoft Planetary</p>
<p>computer, Google Earth Engine, FMI and CSC</p>
<p>https://www.stacindex.org/</p>
<p>Cloud</p>
<p>-</p>
<p>Optimized</p>
<p>GeoTiff</p>
<p>(COG)</p>
<p>‚Ä¢ COG is a regular GeoTIFF file, aimed at being</p>
<p>hosted on a HTTP file server, with an internal</p>
<p>organization that enables more efficient</p>
<p>workflows on the cloud.</p>
<p>‚Ä¢ It does this by leveraging the ability of clients</p>
<p>issuing ‚ÄãHTTP GET range requests to ask for just</p>
<p>the parts of a file they need.</p>
<p>‚Ä¢ Enables partial loading of data</p>
<p>‚Ä¢ Only loads data for a specific area</p>
<p>‚Ä¢ Generalized version of the data is available</p>
<p>element84.com</p>
<p>10/13/2025</p>
<p>Xarray</p>
<p>‚Ä¢ Introduces labels in the form of dimensions, coordinates, and attributes on top</p>
<p>of raw NumPy-like arrays, which allows for more intuitive, more concise, and</p>
<p>less error-prone user experience.</p>
<p>‚Ä¢ Includes a large and growing library of domain-agnostic functions for advanced</p>
<p>analytics and visualization with these data structures.</p>
<p>xarray.dev</p>
<p>How do they work together?</p>
<p>‚Ä¢ A STAC catalog provides links to individual COG files.</p>
<p>‚Ä¢ A library like pystac reads the STAC catalog to find the relevant</p>
<p>COGs for a specific area and time.</p>
<p>‚Ä¢ Instead of downloading the full COG, these libraries use the STAC</p>
<p>metadata and the COG's structure to read only the necessary parts.</p>
<p>‚Ä¢ This data is then loaded into an Xarray DataArray, ready for</p>
<p>analysis. This process is often done lazily, meaning the data is not</p>
<p>actually loaded until you perform an operation on it.</p>
<p>‚Ä¢ Once the data is in an Xarray object, you can easily filter it, perform</p>
<p>calculations, and create composites without manually handling all</p>
<p>the file merging.</p>
<p>10/13/2025</p>
<p>I N D I A N  I N S T I T U T E  O F  R E M O T E  S E N S I N G ,  D E H R A D U N</p>
<p>prasun@iirs.gov.in</p>
<p>Q A</p>
<p>Time for some hands-on</p>
<p>using Python</p>
</details>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    
      
      
      <script id="__config" type="application/json">{"annotate": null, "base": "..", "features": ["navigation.tabs", "navigation.sections", "toc.integrate"], "search": "../assets/javascripts/workers/search.2c215733.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": null}</script>
    
    
      <script src="../assets/javascripts/bundle.79ae519e.min.js"></script>
      
    
  </body>
</html>